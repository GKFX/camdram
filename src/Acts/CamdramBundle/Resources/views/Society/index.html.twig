{% extends 'ActsCamdramBundle::layout.html.twig' %}

{% block title %}Societies{% endblock %}

{% block body %}
 <div class="row">
     {% render url('acts_camdram_entity_toolbar', {type: 'society'}) %}
 </div>

  <div class="row">
      {% if societies|length > 0 %}
        {% set value = 'no spaces' %}
        {% set i = 1  %}
        {% set seen_college = false %} 
        {% for society in societies %}
          {% if (society.college is not empty) and not seen_college %}
            {% set seen_college = true %}
              <hr>
              <h3>College Societies</h3>
          {% endif %}

          <div class="six columns">
          <h5><a href="{{ path('get_society', {slug: society.shortname}) }}">{{ society.name }}</a>
          {% if society.shortname is not empty %}
            <small>- {{ society.shortname }}</small>
          {% endif %}
          </h5>
          {% if society.college is not empty %}
            <h6 class="subheader"><strong>{{ society.college}}</strong></h6>
          {% endif %}
          <p>{{ society.description|slice(0, 200)|strip_new_lines|camdram_markdown }}
          {% if society.description|length > 200 %}
          ...<br>[<a href="{{ path('get_society', {slug: society.shortname}) }}">Read More</a>]
          {% endif %}
          </p>
          </div>

          {% if (i < societies|length) and (i is divisibleby(2)) %}
            </div><!-- endrow -->
            <div class="row">
          {% endif %}
          {% set i = i + 1 %}
        {% endfor %}
      {% else %}
        <div class="twelve columns">
        <p>There are no societies.</p>
      {% endif %}
        </div>
    </div>
  </div>

{% endblock %}

